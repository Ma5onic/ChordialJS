/** Chordial - v0.0.4 - 2012-11-30
 * http://laher.github.com/ChordialJS/
 * Copyright (c) 2012 ; Licensed  
 */
var ChordialJS=ChordialJS||{};ChordialJS.draw={},ChordialJS.parse={},ChordialJS.parse.parseChord=function(e){if(e===null||typeof e=="undefined"||!e.match(/[\dxXA-Fa-f]{6}|((1|2)?[\dxX]-){5}(1|2)?[\dxX]/)&&!e.match(/[\dxXA-Fa-f]{4}|((1|2)?[\dxX]-){3}(1|2)?[\dxX]/))return{error:!0};var t;e.length>6?t=e.split("-"):t=e.split("");var n={error:!1,chordPositions:[],maxFret:0,minFret:99};for(var r=0;r<e.length;r++)t[r].toUpperCase()==="X"?n.chordPositions[r]=-1:(n.chordPositions[r]=parseInt(t[r],16),n.maxFret=Math.max(n.maxFret,n.chordPositions[r]),n.chordPositions[r]!==0&&(n.minFret=Math.min(n.minFret,n.chordPositions[r])));return n.maxFret<=5?n.baseFret=1:n.baseFret=n.minFret,n},ChordialJS.parse.parseFingers=function(e,t){t=String(t).toUpperCase(),t=t.replace(/[^\-T1234]/g,"");var n=t.split("");return n},ChordialJS.parse.init=function(e,t,n,r,i){i=typeof i!="undefined"?i:{"background-color":"#fff"},i.color=i.color?i.color:"#000",i["font-family"]=i["font-family"]?i["font-family"]:"Arial";var s=t.length,o=s>4?s-1:s,u=4*r,a=u/2,f=.7*u,l=Math.ceil(r*.31),c=Math.ceil(.9*u),h=.8,p=u/h,d=u*.8,v=u*2/h,m=.7*v;r===1&&(v+=2,d+=2,p+=2,m+=2);var g=u,y=Math.round(.2*m+v+a+1.7*f),b=(s-1)*u+s*l,w=o*(u+l)+l,E=b+3*u,S=w+y+u+u,x=u*.75,T=x/2;return{name:e,chord:t,fingers:n,size:r,fretWidth:u,nutHeight:a,lineWidth:l,dotWidth:c,markerWidth:f,boxWidth:b,boxHeight:w,stringCount:s,fretCount:o,nameFontSize:v,fingerfontSize:d,fretFontSize:p,superScriptFontSize:m,xstart:u,ystart:y,imageWidth:E,imageHeight:S,signWidth:x,signRadius:T,style:i,chordParsed:ChordialJS.parse.parseChord(t),fingersParsed:ChordialJS.parse.parseFingers(t,n)}},ChordialJS.draw.drawName=function(e,t){var n,r;if(t.name.indexOf("_")===-1)n=t.name,r="";else{var i=t.name.split("_");n=i[0],r=i[1]}e.fillStyle=t.style.color,ChordialJS.draw.setFont(e,t.nameFontSize,t.style["font-family"]);var s=e.measureText(n),o=t.xstart;s.width<t.boxWidth&&(o=t.xstart+(t.boxWidth-s.width)/2),e.fillText(n,o,.2*t.superScriptFontSize),r!==""&&(ChordialJS.draw.setFont(e,t.superScriptFontSize,t.style["font-family"]),e.fillText(r,o+.8*s.width,0));if(t.chordParsed.baseFret>1){ChordialJS.draw.setFont(e,t.fretFontSize,t.style["font-family"]);var u=(t.fretFontSize-t.fretWidth)/2;e.fillText(t.chordParsed.baseFret+"fr",t.xstart+t.boxWidth+.4*t.fretWidth,t.ystart-u)}},ChordialJS.draw.setFont=function(e,t,n){e.font=t+"px "+n,e.textBaseline="top"},ChordialJS.draw.drawBarres=function(e,t){var n={},r;for(var i=0;i<t.stringCount-1;i++)if(t.chordParsed.chordPositions[i]!==-1&&t.chordParsed.chordPositions[i]!==0&&t.fingersParsed[i]!=="-"&&!n.hasOwnProperty(t.fingersParsed[i])){r={Str:i,Pos:t.chordParsed.chordPositions[i],Length:0,Finger:t.fingersParsed[i]};for(var s=i+1;s<t.stringCount;s++)t.fingersParsed[s]===r.Finger&&t.chordParsed.chordPositions[s]===t.chordParsed.chordPositions[i]&&(r.Length=s-i);r.Length>0&&(n[r.Finger]=r)}e.lineWidth=t.lineWidth*3;var o=t.fretWidth+t.lineWidth;e.beginPath();for(var u in n)if(n.hasOwnProperty(u)){r=n[u];var a=t.xstart+r.Str*o,f=a+r.Length*o,l=t.ystart+(r.Pos-t.chordParsed.baseFret+1)*o-o/2;e.moveTo(a,l),e.lineTo(f,l)}e.stroke()},ChordialJS.draw.drawFingers=function(e,t){var n=t.xstart+.5*t.lineWidth,r=t.ystart+t.boxHeight;ChordialJS.draw.setFont(e,t.fingerFontSize,t.style["font-family"]),e.textBaseline="top",e.beginPath();for(var i=0;i<t.fingersParsed.length;i++){var s=t.fingersParsed[i];if(s!=="-"){var o=e.measureText(s.toString());e.fillText(s.toString(),n-.5*o.width,r)}n+=t.fretWidth+t.lineWidth}e.stroke()},ChordialJS.draw.drawPositions=function(e,t){var n=t.ystart-t.fretWidth,r=t.lineWidth/2,i=t.fretWidth+t.lineWidth,s=t.xstart+.5*t.lineWidth;e.beginPath(),e.fillStyle=t.style.color,e.strokeStyle=t.style.color,e.lineWidth=t.lineWidth,e.lineCap="round";var o=t.dotWidth/2;for(var u=0;u<t.chordParsed.chordPositions.length;u++){var a=t.chordParsed.chordPositions[u],f=a-t.chordParsed.baseFret+1,l=t.xstart-.5*t.fretWidth+.5*t.lineWidth+u*i;if(f>0){var c=f*i+n;e.arc(l+o,c+o,o,0,2*Math.PI,!1),e.fill(),e.beginPath()}else if(a===0){var h=t.ystart-t.fretWidth,p=l+(t.dotWidth-t.markerWidth)/2;t.chordParsed.baseFret===1&&(h-=t.nutHeight),e.arc(p+o,h+o,o,0,2*Math.PI,!1),e.stroke(),e.beginPath()}else if(a===-1){var d=t.ystart-t.fretWidth,v=l+(t.dotWidth-t.markerWidth)/2;t.chordParsed.baseFret===1&&(d-=t.nutHeight),e.moveTo(v,d),e.lineTo(v+t.markerWidth,d+t.markerWidth),e.moveTo(v,d+t.markerWidth),e.lineTo(v+t.markerWidth,d),e.stroke(),e.beginPath()}}e.stroke()},ChordialJS.draw.drawBox=function(e,t){e.beginPath(),e.strokeStyle=t.style.color,e.fillStyle=t.style.color!==undefined?t.style.color:"#000";var n=t.fretWidth+t.lineWidth;for(var r=0;r<=t.fretCount;r++){var i=t.xstart,s=t.ystart+r*n,o=t.xstart+t.boxWidth-t.lineWidth,u=s;e.moveTo(i,s),e.lineTo(o,u)}for(var a=0;a<t.stringCount;a++){var f=t.xstart+a*n,l=t.ystart,c=f,h=t.ystart+t.boxHeight-t.lineWidth;e.moveTo(f,l),e.lineTo(c,h)}e.stroke(),t.chordParsed.baseFret===1&&(e.beginPath(),e.rect(t.xstart-t.lineWidth/2,t.ystart-t.nutHeight,t.boxWidth,t.nutHeight),e.fill())},ChordialJS.renderElements=function(e){for(var t=0;t<e.length;t++){var n=e[t];ChordialJS.renderElement(n)}},ChordialJS.renderElement=function(e){var t=e.getAttribute("data-positions");if(t!==null){var n=e.getAttribute("data-fingers"),r=e.getAttribute("data-size"),i=e.hasAttribute("data-name")?e.getAttribute("data-name"):e.firstChild.nodeValue,s=e.style;e.getAttribute("data-name")||e.setAttribute("data-name",i);var o=ChordialJS.parse.init(i,t,n,r,s),u=document.createElement("canvas");u.setAttribute("width",o.imageWidth),u.setAttribute("height",o.imageHeight);var a=u.getContext("2d");o.chordParsed.error||(ChordialJS.draw.drawBox(a,o),ChordialJS.draw.drawPositions(a,o),ChordialJS.draw.drawBarres(a,o),ChordialJS.draw.drawFingers(a,o)),ChordialJS.draw.drawName(a,o);var f=e.childNodes;for(var l=f.length-1;l>=0;l--)e.removeChild(f[l]);e.appendChild(u)}};var ChordialJS=ChordialJS||{};ChordialJS.normaliseNote=function(e){return e.length>1&&e.charAt(1)==="b"?e.charAt(0)==="A"?"G#":e.charAt(0)==="C"?"B":e.charAt(0)==="F"?"E":String.fromCharCode(e.charCodeAt(0)-1)+"#":e},ChordialJS.reverseString=function(e){return e.split("").reverse().join("")},ChordialJS.renderChord=function(e,t,n,r,i){var s=ChordialJS.makeChord(e,t,n,r,i)},ChordialJS.makeChord=function(e,t,n,r,i){r===undefined&&(r="major"),n===undefined&&(n={}),n.size===undefined&&(n.size=3),n.tuning===undefined&&(n.tuning="standard"),i===undefined&&(i=t+(ChordialJS.data.chordTypes.abbreviations[r]!==undefined?ChordialJS.data.chordTypes.abbreviations[r]:r));var s=document.createElement("span");s.setAttribute("data-name",i);var o=ChordialJS.data.chords[n.tuning][r][ChordialJS.normaliseNote(t)][0][0],u=ChordialJS.data.chords[n.tuning][r][ChordialJS.normaliseNote(t)][0][1];return n.lefty&&(o=ChordialJS.reverseString(o),u=ChordialJS.reverseString(u)),s.setAttribute("data-positions",o),s.setAttribute("data-fingers",u),s.setAttribute("data-size",n.size),s.appendChild(document.createTextNode(i)),e.appendChild(s),s};var ChordialJS=ChordialJS||{};ChordialJS.data={chords:{standard:{major:{A:[["X02220","--123-"]],"A#":[["X13331","-13331"]],B:[["X24442","-13331"]],C:[["X32010","-32-1-"]],"C#":[["X46664","-13331"]],D:[["XX0232","---132"]],"D#":[["XX1343","--1243"]],E:[["022100","-231--"]],F:[["133211","134211"]],"F#":[["244322","134211"]],G:[["320003","21---3"]],"G#":[["466544","134211"]]},minor:{A:[["X02210","--231-"]],"A#":[["X13321","-13421"]],B:[["X24432","-13421"]],C:[["X35543","-13421"]],"C#":[["X46654","-13421"]],D:[["XX0231","---132"]],"D#":[["XX4342","--3241"]],E:[["022000","-23---"]],F:[["133111","134111"]],"F#":[["244222","134111"]],G:[["355333","134111"]],"G#":[["466444","134111"]]},seven:{A:[["X02020","--1-3-"]],"A#":[["X13131","-12131"]],B:[["X21202","-213-4"]],C:[["X32310","-32-1-"]],"C#":[["X46464","-12131"]],D:[["XX0212","---213"]],"D#":[["XX1313","--1213"]],E:[["020100","-2-1--"]],F:[["131211","131211"]],"F#":[["242322","131211"]],G:[["320001","32---1"]],"G#":[["464544","131211"]]},sus2:{A:[["X02200","--12--"]],"A#":[["X13311","-12311"]],B:[["X24422","-12311"]],C:[["X30013","-3--12"]],"C#":[["X46644","-12311"]],D:[["XX0230","---21-"]],"D#":[["XX1341","--1231"]],E:[["024400","-123--"]],F:[["XX3013","--2-13"]],"F#":[["X9BB99","-12311"]],G:[["300033","1---23"]],"G#":[["4111XX","3111--"]]},sus4:{A:[["X00230","---12-"]],"A#":[["X11341","-11341"]],B:[["X22452","-11341"]],C:[["88AA88","112311"]],"C#":[["99BB99","112311"]],D:[["XX0233","---134"]],"D#":[["XX1344","--1234"]],E:[["002200","--23--"]],F:[["113311","112311"]],"F#":[["224422","112311"]],G:[["335533","112311"]],"G#":[["446644","112311"]]},diminished:{A:[["X0121X","--132-"]],"A#":[["XXX320","---21-"]],B:[["X2340X","-123--"]],C:[["X3454X","-1243-"]],"C#":[["X42020","-31-2-"]],D:[["XX0134","---134"]],"D#":[["XX1242","--1242"]],E:[["0120XX","-12---"]],F:[["XX3404","--21-3"]],"F#":[["2342XX","1231--"]],G:[["3453XX","1231--"]],"G#":[["42040X","21-3--"]]}},ukulele:{major:{A:[["2100","21--"]],"A#":[["3211","3211"]],B:[["4322","3211"]],C:[["0003","---3"]],"C#":[["1114","1114"]],D:[["2220","111-"]],"D#":[["0331","-231"]],E:[["4442","2341"]],F:[["2010","2-1-"]],"F#":[["3121","3121"]],G:[["0232","-132"]],"G#":[["5343","3121"]]},minor:{A:[["2000","2---"]],"A#":[["3111","3111"]],B:[["4222","3111"]],C:[["0333","-123"]],"C#":[["1444","1222"]],D:[["2210","231-"]],"D#":[["3321","3421"]],E:[["4432","3421"]],F:[["1013","1-24"]],"F#":[["2120","213-"]],G:[["0231","-231"]],"G#":[["1342","1342"]]},seven:{A:[["0100","-1--"]],"A#":[["1211","1211"]],B:[["2322","1211"]],C:[["0001","---1"]],"C#":[["1112","1112"]],D:[["2223","1112"]],"D#":[["3334","1112"]],E:[["1202","12-3"]],F:[["2313","2314"]],"F#":[["3424","2314"]],G:[["0212","-213"]],"G#":[["1323","1324"]]},sus2:{A:[["2400","24--"]],"A#":[["3011","3-11"]],B:[["4122","3122"]],C:[["0233","-233"]],"C#":[["1344","1233"]],D:[["X200","-2--"]],"D#":[["X311","-211"]],E:[["X422","-211"]],F:[["0033","--33"]],"F#":[["X644","-211"]],G:[["0230","-12-"]],"G#":[["1341","1231"]]},sus4:{A:[["2200","22--"]],"A#":[["3311","2311"]],B:[["4402","2301"]],C:[["5533","2311"]],"C#":[["6644","2311"]],D:[["X230","-23-"]],"D#":[["8866","2311"]],E:[["9977","2311"]],F:[["XX11","--11"]],"F#":[["XX22","--22"]],G:[["0033","--33"]],"G#":[["11XX","11--"]]},diminished:{A:[["X986","-321"]],"A#":[["3404","12-3"]],B:[["XBA8","-321"]],C:[["XCB9","-321"]],"C#":[["XDEA","-321"]],D:[["XXAB","--12"]],"D#":[["X320","-21-"]],E:[["X431","-321"]],F:[["X542","-321"]],"F#":[["X653","-321"]],G:[["0131","-131"]],"G#":[["X875","-321"]]}}},tunings:{standard:["E2","A2","D3","G3","B3","E4"],ukulele:["G4","C4","E4","A4"]},degrees:{major:["I","II","III","IV","V","VI","VII"],minor:["i","ii","iii","iv","v","vi","vii"]},progressions:{major:{"I-IV-V":["I","IV","V"],"I-IV-V7":["I","IV","V7"],"50s":["I","vi","IV","V"],Circle:["I","IV","viio","iii","vi","ii","V","I"]},minor:{"Dominant Cadence":["i","V","I"]}},scales:{major:{Ab:[["Ab"],["Bb","minor"],["C","minor"],["Db"],["Eb"],["F","minor"],["G"]],A:[["A"],["B","minor"],["C#","minor"],["D"],["E"],["F#","minor"],["G#"]],Bb:[["Bb"],["C","minor"],["D","minor"],["Eb"],["F"],["G","minor"],["A"]],B:[["B"],["C#","minor"],["D#","minor"],["E"],["F#"],["G#","minor"],["A#"]],Cb:[["Cb"],["Db","minor"],["Eb","minor"],["Fb"],["Gb"],["Ab","minor"],["Bb"]],C:[["C"],["D","minor"],["E","minor"],["F"],["G"],["A","minor"],["B"]],Db:[["Db"],["Eb","minor"],["F","minor"],["Gb"],["Ab"],["Bb","minor"],["C"]],D:[["D"],["E","minor"],["F#","minor"],["G"],["A"],["B","minor"],["C#"]],Eb:[["Eb"],["F","minor"],["G","minor"],["Ab"],["Bb"],["C","minor"],["D"]],E:[["E"],["F#","minor"],["G#","minor"],["A"],["B"],["C#","minor"],["D#"]],F:[["F"],["G","minor"],["A","minor"],["Bb"],["C"],["D","minor"],["E"]],Gb:[["Gb"],["Ab","minor"],["Bb","minor"],["Cb"],["Db"],["Eb","minor"],["F"]],G:[["G"],["A","minor"],["B","minor"],["C"],["D"],["E","minor"],["F#"]]}},chordTypes:{abbreviations:{major:"",minor:"m",seven:"7",diminished:"_o"}}};var ChordialJS=ChordialJS||{};ChordialJS.data={chords:{standard:{major:{A:[["X02220","--123-"]],"A#":[["X13331","-13331"]],B:[["X24442","-13331"]],C:[["X32010","-32-1-"]],"C#":[["X46664","-13331"]],D:[["XX0232","---132"]],"D#":[["XX1343","--1243"]],E:[["022100","-231--"]],F:[["133211","134211"]],"F#":[["244322","134211"]],G:[["320003","21---3"]],"G#":[["466544","134211"]]},minor:{A:[["X02210","--231-"]],"A#":[["X13321","-13421"]],B:[["X24432","-13421"]],C:[["X35543","-13421"]],"C#":[["X46654","-13421"]],D:[["XX0231","---132"]],"D#":[["XX4342","--3241"]],E:[["022000","-23---"]],F:[["133111","134111"]],"F#":[["244222","134111"]],G:[["355333","134111"]],"G#":[["466444","134111"]]},seven:{A:[["X02020","--1-3-"]],"A#":[["X13131","-12131"]],B:[["X21202","-213-4"]],C:[["X32310","-32-1-"]],"C#":[["X46464","-12131"]],D:[["XX0212","---213"]],"D#":[["XX1313","--1213"]],E:[["020100","-2-1--"]],F:[["131211","131211"]],"F#":[["242322","131211"]],G:[["320001","32---1"]],"G#":[["464544","131211"]]},sus2:{A:[["X02200","--12--"]],"A#":[["X13311","-12311"]],B:[["X24422","-12311"]],C:[["X30013","-3--12"]],"C#":[["X46644","-12311"]],D:[["XX0230","---21-"]],"D#":[["XX1341","--1231"]],E:[["024400","-123--"]],F:[["XX3013","--2-13"]],"F#":[["X9BB99","-12311"]],G:[["300033","1---23"]],"G#":[["4111XX","3111--"]]},sus4:{A:[["X00230","---12-"]],"A#":[["X11341","-11341"]],B:[["X22452","-11341"]],C:[["88AA88","112311"]],"C#":[["99BB99","112311"]],D:[["XX0233","---134"]],"D#":[["XX1344","--1234"]],E:[["002200","--23--"]],F:[["113311","112311"]],"F#":[["224422","112311"]],G:[["335533","112311"]],"G#":[["446644","112311"]]},diminished:{A:[["X0121X","--132-"]],"A#":[["XXX320","---21-"]],B:[["X2340X","-123--"]],C:[["X3454X","-1243-"]],"C#":[["X42020","-31-2-"]],D:[["XX0134","---134"]],"D#":[["XX1242","--1242"]],E:[["0120XX","-12---"]],F:[["XX3404","--21-3"]],"F#":[["2342XX","1231--"]],G:[["3453XX","1231--"]],"G#":[["42040X","21-3--"]]}},ukulele:{major:{A:[["2100","21--"]],"A#":[["3211","3211"]],B:[["4322","3211"]],C:[["0003","---3"]],"C#":[["1114","1114"]],D:[["2220","111-"]],"D#":[["0331","-231"]],E:[["4442","2341"]],F:[["2010","2-1-"]],"F#":[["3121","3121"]],G:[["0232","-132"]],"G#":[["5343","3121"]]},minor:{A:[["2000","2---"]],"A#":[["3111","3111"]],B:[["4222","3111"]],C:[["0333","-123"]],"C#":[["1444","1222"]],D:[["2210","231-"]],"D#":[["3321","3421"]],E:[["4432","3421"]],F:[["1013","1-24"]],"F#":[["2120","213-"]],G:[["0231","-231"]],"G#":[["1342","1342"]]},seven:{A:[["0100","-1--"]],"A#":[["1211","1211"]],B:[["2322","1211"]],C:[["0001","---1"]],"C#":[["1112","1112"]],D:[["2223","1112"]],"D#":[["3334","1112"]],E:[["1202","12-3"]],F:[["2313","2314"]],"F#":[["3424","2314"]],G:[["0212","-213"]],"G#":[["1323","1324"]]},sus2:{A:[["2400","24--"]],"A#":[["3011","3-11"]],B:[["4122","3122"]],C:[["0233","-233"]],"C#":[["1344","1233"]],D:[["X200","-2--"]],"D#":[["X311","-211"]],E:[["X422","-211"]],F:[["0033","--33"]],"F#":[["X644","-211"]],G:[["0230","-12-"]],"G#":[["1341","1231"]]},sus4:{A:[["2200","22--"]],"A#":[["3311","2311"]],B:[["4402","2301"]],C:[["5533","2311"]],"C#":[["6644","2311"]],D:[["X230","-23-"]],"D#":[["8866","2311"]],E:[["9977","2311"]],F:[["XX11","--11"]],"F#":[["XX22","--22"]],G:[["0033","--33"]],"G#":[["11XX","11--"]]},diminished:{A:[["X986","-321"]],"A#":[["3404","12-3"]],B:[["XBA8","-321"]],C:[["XCB9","-321"]],"C#":[["XDEA","-321"]],D:[["XXAB","--12"]],"D#":[["X320","-21-"]],E:[["X431","-321"]],F:[["X542","-321"]],"F#":[["X653","-321"]],G:[["0131","-131"]],"G#":[["X875","-321"]]}}},tunings:{standard:["E2","A2","D3","G3","B3","E4"],ukulele:["G4","C4","E4","A4"]},degrees:{major:["I","II","III","IV","V","VI","VII"],minor:["i","ii","iii","iv","v","vi","vii"]},progressions:{major:{"I-IV-V":["I","IV","V"],"I-IV-V7":["I","IV","V7"],"50s":["I","vi","IV","V"],Circle:["I","IV","viio","iii","vi","ii","V","I"]},minor:{"Dominant Cadence":["i","V","I"]}},scales:{major:{Ab:[["Ab"],["Bb","minor"],["C","minor"],["Db"],["Eb"],["F","minor"],["G"]],A:[["A"],["B","minor"],["C#","minor"],["D"],["E"],["F#","minor"],["G#"]],Bb:[["Bb"],["C","minor"],["D","minor"],["Eb"],["F"],["G","minor"],["A"]],B:[["B"],["C#","minor"],["D#","minor"],["E"],["F#"],["G#","minor"],["A#"]],Cb:[["Cb"],["Db","minor"],["Eb","minor"],["Fb"],["Gb"],["Ab","minor"],["Bb"]],C:[["C"],["D","minor"],["E","minor"],["F"],["G"],["A","minor"],["B"]],Db:[["Db"],["Eb","minor"],["F","minor"],["Gb"],["Ab"],["Bb","minor"],["C"]],D:[["D"],["E","minor"],["F#","minor"],["G"],["A"],["B","minor"],["C#"]],Eb:[["Eb"],["F","minor"],["G","minor"],["Ab"],["Bb"],["C","minor"],["D"]],E:[["E"],["F#","minor"],["G#","minor"],["A"],["B"],["C#","minor"],["D#"]],F:[["F"],["G","minor"],["A","minor"],["Bb"],["C"],["D","minor"],["E"]],Gb:[["Gb"],["Ab","minor"],["Bb","minor"],["Cb"],["Db"],["Eb","minor"],["F"]],G:[["G"],["A","minor"],["B","minor"],["C"],["D"],["E","minor"],["F#"]]}},chordTypes:{abbreviations:{major:"",minor:"m",seven:"7",diminished:"_o"}}};